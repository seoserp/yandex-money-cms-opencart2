# Y.CMS для Opencart 2.0.x - 2.3.x от Яндекс.Кассы
Y.CMS для Opencart — это универсальный модуль для интеграции интернет-магазина с сервисами Яндекса.

Мы собрали все основные сервисы Яндекса в одном месте,чтобы вам было удобно работать со своим сайтом, сделанном на CMS Opencart. Подробнее о возможностях этого модуля:

## [Яндекс.Касса](http://kassa.yandex.ru/) и на вашем сайте будут самые популярные способы оплаты.
Доступные платежные методы, если вы работаете как юридические лицо:

* **Банковские карты** -  Visa (включая Electron), MasterCard и Maestro любого банка мира
* **Электронные деньги** - Яндекс.Деньги, WebMoney и QIWI Wallet
* **Наличные** - [Более 170 тысяч пунктов](https://money.yandex.ru/pay/doc.xml?id=526209) оплаты по России
* **Баланс телефона** - Билайн, МегаФон и МТС
* **Интернет банкинг** - Альфа-Клик, Сбербанк Онлайн, MasterPass и Промсвязьбанк
* **Кредитование** - Доверительный платеж (Куппи.ру)

Существует два платежных сценария: с выбором способа оплаты на сайте магазина и на стороне Яндекс.Кассы. 

**Выбор способа оплаты на сайте магазина** 

 В настройках модуля продавец отмечает доступные способы оплаты (они указаны в договоре с компанией «Яндекс.Деньги»). Эти способы появляются на сайте и их видит покупатель, когда переходит к оформлению заказа. Такой сценарий по умолчанию выбран для всех магазинов. 

**Выбор способа оплаты на стороне Яндекс.Кассы**

 Другое название сценария – технология «Умный платеж». На сайте магазина появляется одна кнопка – «Заплатить», а весь процесс оплаты переходит на сайт Яндекс.Денег. 
Способы оплаты добавляются автоматически. Появляются рекомендации: на первом месте для покупателя по умолчанию будут те способы, которыми он уже платил в интернете. 
Чтобы включить «Умный платеж», в настройках модуля «Y.CMS для OpenCart» поставьте «Выбор способа оплаты на стороне Яндекс.Кассы»

## [Merchant Web Services](https://tech.yandex.ru/money/doc/payment-solution/payment-management/payment-management-about-docpage/)
Merchant Web Services (MWS) — это сервис, с помощью которого можно делать возвраты. Он доступен всем пользователям Яндекс.Кассы. 

## [Яндекс.Деньги](https://money.yandex.ru/) - начните получать деньги прямо сейчас — от любых пользователей рунета.
Переводы будут мгновенно зачисляться на ваш счет в Яндекс.Деньгах.
Доступные платежные методы, если вы осуществляете p2p переводы:

* **Банковские карты** -  Visa (включая Electron), MasterCard и Maestro любого банка мира
* **Электронные деньги** - Яндекс.Деньги

## [Яндекс.Метрика](https://metrika.yandex.ru/) - бесплатный сервис, предназначенный для оценки посещаемости веб-сайтов, и анализа поведения пользователей.
Сохраняйте настройки, смотрите за поведением пользователей https://metrika.yandex.ru/list/

## [Яндекс.Маркет](http://market.yandex.ru/) ([CPC](http://welcome.advertising.yandex.ru/market/), [CPA](http://help.yandex.ru/partnermarket/purchase/about.xml)) 
Модуль CPA – программа "Покупка на Маркете"
Модуль позволяет участвовать в программе «Покупка на Маркете». Заказать товары из магазинов, подключённых к программе, можно прямо на Маркете — не переходя на сайт продавца. «Покупка на Маркете» сокращает путь пользователя до покупки и повышает доверие к магазину.

Модуль СРС – размещение на Маркете
Модуль предназначен для размещения товарных предложений на Яндекс.Маркете. Так магазины могут привлекать на свой сайт больше посетителей, действительно заинтересованных в покупке. YML-формат обеспечивает максимально корректную передачу данных о товарах в Маркет.

## Требования к CMS Opencart:
* версия 2.0.х - 2.3.x
* PHP 5.3 или выше
* cURL
* FTP в настройках Opencart 2.3.x (или можно использовать [QuickFix от iSense](https://www.opencart.com/index.php?route=marketplace/extension/info&member_token=B9Ikn7L8B41h1OwoZkRSNsuMEckpCHfs&extension_id=18892)) 

## Установка
Инструкция размещена на [странице сервиса Яндекс.Касса](https://kassa.yandex.ru/files/manual_y.cms_opencart2.pdf).

> Для работы с Яндекс.Маркетом по программе "Заказы в Маркете" необходимо: 
> 1. Для Apache: добавить в файл `.htaccess` корневого каталога сайта строку `RewriteRule ^yandexbuy/([^?]*)$ index.php?route=yandexbuy/$1 [L,QSA]` после строки `RewriteBase /`  
> 2. Для Nginx: добавить в блок server конфига nginx <code>location /yandexbuy {  rewrite ^/yandexbuy/([^?]*)$ /index.php?route=yandexbuy/$1 last; } </code>
> 3. Установить идентификаторы точек самовывоза равными значениям порядка сортировки соответствующих методов (пока тестируем на beta-версии модуля)
>
> Модуль копирует файлы шаблонов в каталог с темой default (`catalog/view/theme/default`) вашего сайта и если у вас используется другой каталог с шаблоном, то скопируйте файлы модуля из архива (`\catalog\view\theme`) в каталог с Вашей темой

## Лицензионный договор
Любое использование Вами программы означает полное и безоговорочное принятие Вами условий лицензионного договора, размещенного по адресу https://money.yandex.ru/doc.xml?id=527052 (далее – «Лицензионный договор»). Если Вы не принимаете условия Лицензионного договора в полном объёме, Вы не имеете права использовать программу в каких-либо целях.

## Нашли ошибку или у вас есть предложение по улучшению модуля?
Пишите нам cms@yamoney.ru
При обращении необходимо:
* Указать наименование CMS и компонента магазина, а также их версии
* Указать версию платежного модуля (доступна на странице настроек модуля)
* Описать проблему или предложение
* Приложить снимок экрана (для большей информативности)

Ответы на частые вопросы опубликованы [тут](https://github.com/yandex-money/yandex-money-cms-opencart2/blob/master/FAQ.md)